<!DOCTYPE html>
<html>
<head>
  <title>Tasklist</title>
</head>
<body>
  <header>
    <h1>Tasklist</h1>
    <nav>
      <ul>
        <li><%= link_to "All tasks", root_path, method: :get %></li>
        <li><%= link_to "Add new task", new_task_path, method: :get %></li>
      </ul>
    </nav>
  </header>
  <main>
    <h1>Tasks</h1>
    <ul>
      <% @tasks.each do |task|  %>
        <li>
          <% if task[:completed_at].nil?%>
            <h2><%= task[:name] %></h2>
          <% else %>
            <h2><strike><%= task[:name] %></strike></h2>
          <% end %>
          <h3>Status: <%= task[:completed_at].nil? ? "Incomplete" : "Completed at #{task[:completed_at]}" %></h3>
          <p><%= task[:description] %></p>
          <ul>
            <li><%= link_to "View", task_path(task.id), method: :get %></li>
            <li><%= link_to "Edit", edit_task_path(task.id), method: :get %></li>
            <li><%= link_to "Toggle complete", toggle_complete_task_path(task.id), method: :patch %></li>
            <li><%= link_to "Delete", task_path(task.id), method: :delete, data: {confirm: "Are you sure you want to delete this task?"}%></li>
          </ul>
        </li>
      <% end %>
    </ul>
  </main>
 </body>
</html>

